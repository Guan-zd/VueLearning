# 深入浅出Vue.js

`刘博文@著`

## 内容摘要

本书从源码层面分析了Vue.js。首先，简要介绍了Vue.js;接着详细讲解了其内部核心技术“变化侦测”，并带领大家从0到1实现一个简单的“变化侦测系统”；然后详细的介绍了虚拟DOM技术，其中包括虚拟DOM的原理及其patching算法；再后详细讨论了模板编译技术，其中包括模板解析器的实现原理、优化器的原理以及代码生成器的原理；最后详细介绍了其整体架构以及提供给我们使用的各种API的内部原理，同时还介绍了生命周期、错误处理、指令系统与模板过滤器等功能的原理。

#### 第1章	Vue.js简介

Vue.js提供了声明式操作DOM的能力来解决应用程序变复杂时操作DOM写需求的问题

##### 1.1	什么是Vue.js

**Vue.js，通常简称为Vue，是一款友好、多用途且性能高的JavaScript框架，能够帮助我们创建可维护性的可测试性更强的代码。**

- Vue.js是一款渐进式的Javascript框架
- Vue.js允许你将一个网页分割成可复用的组件
- Vue.js提供了一个命令行工具，它让快速初始化一个真实的项目工程变得非常简单
- 可以使用Vue.js的单文件组件，可以使项目架构变得非常清晰，可维护

##### 1.2	Vue.js简介

- 2013.7.28尤雨溪在Github上第一次提交
- 2013.12.7新版本 0.6.0 v-指令
- 2014.2.1首次公开发布
- 2015.10.26发布1.0.0版本 **The fate of destruction id also the joy of rebirth 毁灭的命运，也是重生的喜悦** Evangelion
- 2016.10.1发布Vue.js2.0 **Your effortc to remain what you are is what limits you 保持本色的努力，也在限制你的发展** 
- 加入一些官方的辅助工具：路由(Router)、状态管理方案(Vuex)、构建工具(vue-cli)

**Vue.js始终维持着一个理念：这个框架应该是渐进式的  The Progressive Framework**

框架分层：由内之外，Vue.js有足够的灵活性来适应不同的需求，根据自己的需求选择不同的层级

- 视图层渲染
- 组件机制
- 路由机制
- 状态管理
- 构建工具

**Vue.js已是一名前端工程师必备的技能** 

#### 第2章 Object变化侦测

**Object和Arrary的变化侦测采用不同的方式处理**

##### 2.1什么是变化侦测

- Vue.js会自动通过状态生成DOM，并将其输出到页面上显示出来，这个过程叫渲染。
- Vue.js的渲染过程是声明式的，我们通过模板来描述状态与DOM之间的映射关系。

**通常，在运行时应用内部的状态会不断发生变化，此时需要不停的重新渲染，变化侦测就是用来解决`如何确定状态中发生了什么变化`这个问题的。**

两种类型
- 推(Vue)：当状态发生变化时，Vue.js立刻就知道了，而且在一定程度上知道哪些状态变了，因此知道的信息更多，也就可以更细粒度的更新。
- 拉(Angular/React)：当状态发生变化时，发送一个信号给框架，框架收到信号后，会进行暴力比对来找出哪些节点需要重新渲染。(A:脏检查;R:虚拟DOM)

更细粒度：假如有一个状态绑定着好多个依赖，每一个依赖表示一个具体的DOM节点，当这个状态发生变化时，向这个状态的所有依赖发送通知，让他们进行DOM更新操作。

- Vue.js2.0开始引入了虚拟DOM，将粒度调整为中等粒度。
- 即一个状态所绑定的依赖不再是具体的DOM节点，而是一个组件。
- 状态变化后，会通知到组件，组件内部再使用虚拟DOM进行对比，可以大大降低依赖数量，降低追踪依赖所消耗的内寸。

**Vue.js之所以能随意调整粒度，本质上还要归功于变化侦测，'推'类型的变化侦测可以随意调整粒度。**